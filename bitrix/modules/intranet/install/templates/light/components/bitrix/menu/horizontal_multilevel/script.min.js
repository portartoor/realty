(function(t){if(!t.BX||BX.PortalTopMenu)return;BX.PortalTopMenu={items:{},idCnt:1,currentItem:null,touchMode:false,init:function(){var t=BX("top-menu").querySelectorAll("[data-role='bx-top-menu-item']");if(t){for(var e=0;e<t.length;e++){BX.bind(t[e],"click",function(t){BX.PortalTopMenu.itemOnclick(this,t)});BX.bind(t[e],"touchstart",function(t){BX.PortalTopMenu.itemTouchStart(this,t)});BX.bind(t[e],"mouseover",function(t){BX.PortalTopMenu.itemOver(this)});BX.bind(t[e],"mouseout",function(t){BX.PortalTopMenu.itemOut(this,t)})}}},getItem:function(t){if(!BX.type.isDomNode(t))return null;var i=!t.id||!BX.type.isNotEmptyString(t.id)?t.id="root-menu-item-"+this.idCnt++:t.id;if(!this.items[i])this.items[i]=new e(t);return this.items[i]},itemOver:function(t,e){if(e!==true&&this.touchMode)return;var i=this.getItem(t);if(!i)return false;if(this.currentItem&&this.currentItem!=i){this.currentItem.__itemOut()}this.currentItem=i;i.itemOver()},itemOut:function(t,e){var i=this.getItem(t);if(i){i.itemOut(e);this.currentItem=null}},itemTouchStart:function(t,e){if(!this.touchMode){BX.bind(document,"touchstart",BX.proxy(this.closeCurrentItem,this))}this.touchMode=true;BX.eventCancelBubble(e)},itemOnclick:function(t,e){if(!this.touchMode)return;var i=this.getItem(t);if(this.currentItem!=i){this.itemOver(t,true);BX.PreventDefault(e)}},closeCurrentItem:function(){if(this.currentItem){this.currentItem.itemOut();this.currentItem=null}}};var e=function(e){this.element=e;this.submenu=BX.findChild(e,{className:"submenu"},true);this.timeoutId=null;if(this.submenu){BX("top-menu-layout",true).appendChild(this.submenu.parentNode.removeChild(this.submenu));BX.bind(this.submenu,"mouseover",BX.proxy(this.itemOver,this));BX.bind(this.submenu,"mouseout",BX.proxy(this.itemOut,this));BX.bind(this.submenu,"touchstart",function(e){e=e||t.event;BX.eventCancelBubble(e)})}};e.prototype.itemOver=function(){if(this.timeoutId)clearTimeout(this.timeoutId);if(this.submenu&&this.submenu.style.display!="block"){BX.addClass(this.element,"hover");this.adjustPosition()}};e.prototype.itemOut=function(t){var e=document.elementFromPoint(t.clientX,t.clientY);if(e){var i=e.style?e.style.display||"":"";e.style.display="none";var n=document.elementFromPoint(t.clientX,t.clientY);e.style.display=i;if(!this.submenu.contains(n))this.timeoutId=setTimeout(BX.proxy(this.__itemOut,this),0)}};e.prototype.__itemOut=function(){BX.removeClass(this.element,"hover");if(this.submenu)this.submenu.style.display="none"};e.prototype.adjustPosition=function(){if(!this.submenu)return;var t=0;var e=BX.pos(this.element,true);var i=this.getSubmenuWidth();if(e.left+i+42>BX.GetWindowInnerSize().innerWidth){t=e.left-i+e.width+12;BX.addClass(this.submenu,"submenu-rtl")}else{t=e.left;BX.removeClass(this.submenu,"submenu-rtl")}BX.adjust(this.submenu,{style:{position:"absolute",top:e.bottom+"px",left:t+"px",display:"block",zIndex:1e3}})};e.prototype.getSubmenuWidth=function(){var t=BX.hasClass(this.submenu,"submenu-two-columns")?400:220;if(this.element.offsetWidth>t-8){t=this.element.offsetWidth+50;this.submenu.style.width=this.submenu.style.maxWidth=t+"px"}else{this.submenu.style.width="";this.submenu.style.maxWidth="400px"}return t}})(window);
//# sourceMappingURL=script.map.js