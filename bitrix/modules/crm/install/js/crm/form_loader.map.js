{"version":3,"file":"form_loader.min.js","sources":["form_loader.js"],"names":["Bitrix24FormLoader","init","this","yaId","forms","eventHandlers","frameHeight","defaultNodeId","window","Bitrix24FormObject","forEach","preLoad","params","_this","type","defaultNode","document","getElementById","defaultClickClassNodeList","getElementsByClassName","id","click","length","i","push","item","nextElementSibling","Object","prototype","toString","call","formInstance","isFormExisted","getUniqueLoadId","buttonNode","addEventListener","showPopup","setTimeout","delay","load","createPopup","popup","createElement","innerHTML","children","node","querySelector","btn","hidePopup","body","insertBefore","appendChild","styleFixNode","setAttribute","createTextNode","head","resizePopup","addEventHandler","form","keyCode","e","kc","which","interfaceMagic","windowHeight","documentElement","clientHeight","popupHeight","needScroll","style","height","width","clientWidth","util","isIOS","addClass","display","removeClass","element","className","indexOf","replace","hasClass","classList","nodeListToArray","filtered","filter","name","test","navigator","userAgent","isMobile","createFrame","formUrl","page","domain","frame","frameName","locationHash","location","protocol","host","from","href","fields","options","presets","frameSrc","lang","sec","Date","encodeURIComponent","JSON","stringify","handlers","execEventHandler","uniqueLoadId","ref","match","iframe","parentNode","onFrameLoad","event","origin","doFrameAction","data","unload","removeChild","dataString","parse","err","action","value","setFrameHeight","parseInt","eventName","dataLayer","virtualPageURL","eventCategory","eventAction","ga","isGaExists","getAll","tracker","get","gaId","Ya","Metrika","counters","reachGoal","checkHash","hash","substring","ie","postMessage","frameParameters","contentWindow","el","handler","attachEvent","target","eventHandler","apply"],"mappings":"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"}