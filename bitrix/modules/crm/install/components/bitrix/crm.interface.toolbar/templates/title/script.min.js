if(typeof BX.InterfaceToolBar==="undefined"){BX.InterfaceToolBar=function(){this._id="";this._settings=null;this._container=null;this._menuButton=null;this._menuPopup=null;this._isMenuOpened=false};BX.InterfaceToolBar.prototype={initialize:function(e,t){this._id=e;this._settings=t?t:BX.CrmParamBag.create(null);var n=this._container=BX(this.getSetting("containerId",""));if(n){var i=this.getSetting("menuButtonClassName");if(!BX.type.isNotEmptyString(i)){i=this.getSetting("moreButtonClassName","crm-setting-btn")}if(BX.type.isNotEmptyString(i)){var o=this._menuButton=BX.findChild(n,{className:i},true,false).parentNode;if(o){BX.bind(o,"click",BX.delegate(this.onMenuButtonClick,this))}}}},getId:function(){return this._id},getSetting:function(e,t){return this._settings.getParam(e,t)},openMenu:function(e){if(this._isMenuOpened){this.closeMenu();return}var t=this.getSetting("items",null);if(!BX.type.isArray(t)){return}var n=/return\s+false(\s*;)?\s*$/;var i=/;\s*$/;var o=[];for(var u=0;u<t.length;u++){var s=t[u];var p=typeof s["SEPARATOR"]!=="undefined"?s["SEPARATOR"]:false;if(p){o.push({SEPARATOR:true});continue}var r=typeof s["LINK"]!=="undefined"?s["LINK"]:"";var a=typeof s["ONCLICK"]!=="undefined"?s["ONCLICK"]:"";if(r!==""){var f='window.location.href = "'+r+'";';a=a!==""?f+" "+a:f}if(a!==""){if(!n.test(a)){if(!i.test(a)){a+=";"}a+=" return false;"}}o.push({text:typeof s["TEXT"]!=="undefined"?s["TEXT"]:"",onclick:a})}this._menuId=this._id.toLowerCase()+"_menu";BX.PopupMenu.show(this._menuId,this._menuButton,o,{offsetTop:0,offsetLeft:0,events:{onPopupShow:BX.delegate(this.onPopupShow,this),onPopupClose:BX.delegate(this.onPopupClose,this),onPopupDestroy:BX.delegate(this.onPopupDestroy,this)}});this._menuPopup=BX.PopupMenu.currentItem},closeMenu:function(){if(this._menuPopup){if(this._menuPopup.popupWindow){this._menuPopup.popupWindow.destroy()}}},onMenuButtonClick:function(e){this.openMenu()},onPopupShow:function(){this._isMenuOpened=true},onPopupClose:function(){this.closeMenu()},onPopupDestroy:function(){this._isMenuOpened=false;this._menuPopup=null;if(typeof BX.PopupMenu.Data[this._menuId]!=="undefined"){delete BX.PopupMenu.Data[this._menuId]}}};BX.InterfaceToolBar.create=function(e,t){var n=new BX.InterfaceToolBar;n.initialize(e,t);return n}}
//# sourceMappingURL=script.map.js