{"version":3,"file":"script.min.js","sources":["script.js"],"names":["AJAX_URL","lastInstance","CallListActivity","config","this","node","callListId","webformId","webformSecCode","allowEdit","gridId","lastGridUrl","enableSavePopup","tabs","_itemsState","_handleTabHeaderClickEvent","_handleTabHeaderClick","bind","init","externalRequests","create","getLast","prototype","self","getNode","setActiveTab","tabHeader","tabNodes","BX","findChildrenByClassName","type","isArray","forEach","tabNode","push","dataset","bindEvents","addCustomEvent","window","gridData","requestParams","url","util","add_url_param","sessid","bitrix_sessid","ajax_action","_OnExternalEvent","reInit","findChildren","className","createFromLeads","_handleCreateFromClick","createFromContacts","createFromCompanies","addMore","_handleAddMore","callButton","document","e","BXIM","dialogId","CrmActivityProvider","dialogs","hasOwnProperty","close","FoldedCallView","getInstance","destroy","startCallList","openFilterButton","_handleOpenFilterClick","planner","Crm","Activity","Planner","Manager","_onAfterActivitySave","_onPlannerClose","name","scope","querySelector","getNodeValue","value","getTab","getTabHeader","tabName","tab","removeClass","addClass","showItemsGrid","gridContainer","_loadItemsGrid","pageHtml","innerHTML","successCallback","params","ajax","method","dataType","data","onsuccess","HTML","_reloadLayout","subject","description","outerHTML","target","response","SUCCESS","DATA","LIST_URL","open","context","_generateExternalContext","listUrl","call_list_context","call_list_id","isPlainObject","key","grid","getGrid","reloadGrid","activityFields","NEW","popup","PopupWindow","autoHide","overlay","lightShadow","closeIcon","closeByEsc","contentColor","titleBar","message","content","props","text","buttons","PopupWindowButton","events","click","VIEW_URL","onPopupClose","show","Main","gridManager","deleteItems","items","deleteSelected","selectedIds","getRows","getSelectedIds","gridHandle","getById","instance","reload","_getRandomString","len","charSet","randomString","i","randomPoz","Math","floor","random","length","substring"],"mappings":"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"}