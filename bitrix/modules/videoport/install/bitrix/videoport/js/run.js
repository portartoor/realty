var vp={};vp.v={};vp.v.MessageType={User:0,System:1};vp.v.UserType={Normal:0,Guest:1,CommonChat:2,Anonymous:3};vp.v.UserRole={Invalid:0,General:1,Leader:2,Speaker:3,Reporter:4,Remark:5};vp.v.UserStatus={Undefined:-127,Invalid:-1,Offline:0,Online:1,Busy:2,Broadcast:3,VIPPublic:4,MultiHost:5};vp.v.ConfType={Single:0,Multi:1};vp.v.UsetRoleIcon=["images/attendant.gif","images/attendant.gif","images/owner.gif","images/podium.gif","images/podium.gif","images/attendant.gif"];vp.v.Version="";vp.v.DefaultUrl="";vp.v.ServerURL="";vp.v.Installer="";vp.v.ApplicationType="application/web-client-np";vp.v.ClassID="CLSID:647D42B5-B9B8-4068-96B0-292F985F8A51";vp.v.ServerHost="";vp.v.ServerPort="";vp.v.Session="";vp.v.LoginName="";vp.v.Password="";vp.v.ConfName="";vp.v.ConfPassword="";vp.v.Conf=vp.v.ConfType.Single;vp.v.OtherID="";vp.v.CallID="";vp.v.delay=3000;vp.v.Width=640;vp.v.Height=529;vp.v.ChatLogHeight=100;vp.v.CommonChatID="--common";vp.v.debug=true;vp.v.l10n=[];vp.v.Language="en";vp.v.Me="";vp.v.Party="";vp._=function(B){var A=vp.v.l10n&&vp.v.l10n&&vp.v.l10n[B]?vp.v.l10n[B]:B;return A.replace(/\[js\/?\]/ig,"").replace(/\[([^\]]+)\]/g,"<jQuery1>")};function OnDebugMessage(A){vp.Debug.log(arguments);jQuery(document).trigger("OnDebugMessage",[A])}function OnChangeState(B,A){vp.Debug.log(arguments);jQuery(document).trigger("OnChangeState",[B,A])}function OnChangeOtherState(A){vp.Debug.log(arguments);jQuery(document).trigger("OnChangeOtherState",[A])}function OnUserChangeState(A,B){vp.Debug.log(arguments);jQuery(document).trigger("OnUserChangeState",[A,B])}function OnReceiveUserInfo(A){vp.Debug.log(arguments);jQuery(document).trigger("OnReceiveUserInfo",[A])}function OnRoleNotify(B,C,A){vp.Debug.log(arguments);jQuery(document).trigger("OnRoleNotify",[B,C,A])}function OnIncommingMessage(C,A,H,G,B,F,D,E){vp.Debug.log(arguments);jQuery(document).trigger("OnIncommingMessage",[C,A,H,G,B,F,D,E])}function OnChatButtonClick(A){vp.Debug.log(arguments);jQuery(document).trigger("OnChatButtonClick",[A])}function OnChatUserClick(B,A){vp.Debug.log(arguments);jQuery(document).trigger("OnChatUserClick",[B,A])}function OnIncomingQuery(B,A){vp.Debug.log(arguments);jQuery(document).trigger("OnIncomingQuery",[B,A])}function OnLoad(A){vp.Debug.log(arguments);jQuery(document).trigger("OnLoad",[A])}function OnIncomingRecordQuery(A,B){vp.Debug.log(arguments);jQuery(document).trigger("OnIncomingRecordQuery",[A,B])}function OnConferenceJoin(C,B,A){vp.Debug.log(arguments);jQuery(document).trigger("OnConferenceJoin",[C,B,A])}function OnConferenceLeave(C,B,A){vp.Debug.log(arguments);jQuery(document).trigger("OnConferenceLeave",[C,B,A])}function OnAnswerRecordUser(B,A){vp.Debug.log(arguments);jQuery(document).trigger("OnAnswerRecordUser",[B,A])}function OnPersonChatButtonClick(B,A){vp.Debug.log(arguments)}function OnStartInstance(A){vp.Debug.log(arguments);jQuery(document).trigger("OnStartInstance",[A])}function OnCustomVerbClick(A){vp.Debug.log(arguments);jQuery(document).trigger("onCustomButtonClick",[A])}vp.Controller=function(A){this.Init(A);this.wx=new vp.Plugin();this.chat=new vp.Chat();this.panel=new vp.Panel();this.users_list=new vp.UsersList();this.BindEvents(A)};vp.Controller.prototype.Init=function(A){if(!A){return false}vp.v.DefaultUrl=A.DefaultUrl?A.DefaultUrl:"http://vzochat.com";vp.v.CommonChatID=A.CommonChatID?A.CommonChatID:"--common";vp.v.ChatLogHeight=A.ChatLogHeight?A.ChatLogHeight:100;vp.v.Width=A.Width?A.Width:vp.v.Width;vp.v.Height=A.Height?A.Height:vp.v.Height;if(A.Version){vp.v.Version=A.Version}vp.v.ServerURL=A.ServerUrl?A.ServerUrl:"http://share.vzochat.com";vp.v.ServerHost=A.ServerHost?A.ServerHost:"";vp.v.ServerPort=A.ServerPort?A.ServerPort:"";vp.v.Session=A.SessionKey?A.SessionKey:"";vp.v.LoginName=A.LoginName?A.LoginName:"";vp.v.Password=A.Password?A.Password:"";vp.v.ConfName=A.ConfName?A.ConfName.replace("\\c\\",""):"";vp.v.ConfPassword=A.ConfPassword?A.ConfPassword:"";vp.v.OtherID=A.OtherID?A.OtherID:"";vp.v.CallID=A.CallID?A.CallID:"";vp.v.debug=A.Debug?true:false;vp.v.Language=A.Language?A.Language:"en"};vp.Controller.prototype.BindEvents=function(A){jQuery(document).bind("OnChangeState",{obj:this},function(C,D,B){C.data.obj.OnChangeState(D,B)});jQuery(document).bind("OnChangeOtherState",{obj:this},function(B,C){B.data.obj.OnChangeOtherState(C)});jQuery(document).bind("OnReceiveUserInfo",{obj:this},function(B,C){B.data.obj.OnReceiveUserInfo(C)});jQuery(document).bind("OnRoleNotify",{obj:this},function(C,D,E,B){C.data.obj.OnRoleNotify(D,E,B)});jQuery(document).bind("OnUserChangeState",{obj:this},function(B,C,D){B.data.obj.OnUserChangeState(C,D)});jQuery(document).bind("OnIncommingMessage",{obj:this},function(C,I,E,J,B,G,F,H,D){C.data.obj.OnIncommingMessage(I,E,J,B,G,F,H,D)});jQuery(document).bind("OnChatButtonClick",{obj:this},function(B,C){B.data.obj.OnChatButtonClick(C)});jQuery(document).bind("OnChatUserClick",{obj:this},function(B,D,C){B.data.obj.OnChatUserClick(D,C)});jQuery(document).bind("OnIncomingQuery",{obj:this},function(B,D,C){B.data.obj.OnIncomingQuery(D,C)});jQuery(document).bind("OnLoad",{obj:this},function(C,B){C.data.obj.OnLoad(B)});jQuery(document).bind("OnConferenceJoin",{obj:this},function(C,E,D,B){C.data.obj.OnConferenceJoin(E,D,B)});jQuery(document).bind("OnConferenceLeave",{obj:this},function(C,E,D,B){C.data.obj.OnConferenceLeave(E,D,B)});jQuery(document).bind("OnStartInstance",{obj:this},function(C,B){C.data.obj.OnStartInstance(B)});jQuery(document).bind("OnTabClose",{obj:this},function(B,C){B.data.obj.RemoveChatItem(C)})};vp.Controller.prototype.Run=function(){this.wx.Render();this.chat.Render();this.panel.Render()};vp.Controller.prototype.CheckVersion=function(){var A=new Number(this.wx.get().Version);if(A<new Number(vp.v.Version)){jQuery("#vp_reinstall").show()}};vp.Controller.prototype.OnLoad=function(A){jQuery("#vp_loader").hide()};vp.Controller.prototype.OnChatButtonClick=function(A){if(A){this.chat.Show();if(vp.v.Party.callid){this.chat.Add(new vp.ChatItem(vp.v.Party));this.chat.HideTabsPanel();this.chat.SelectItem(vp.v.Party.callid);if(this.chat.Count()>1){this.chat.ShowTabsPanel()}}}else{this.chat.Hide()}};vp.Controller.prototype.OnChatUserClick=function(D,C){var B=D.replace("@g","guest_");var A=this.users_list.GetByID(B);if(!A){return false}if(!this.chat.ExistItem(B)){this.chat.Add(new vp.ChatItem(A))}this.chat.Show();this.chat.SelectItem(B)};vp.Controller.prototype.OnSendMessage=function(A){this.wx.sendMessage(A)};vp.Controller.prototype.OnConferenceJoin=function(D,C,B){vp.v.Conf=vp.v.ConfType.Multi;var A=new vp.User({callid:D,name:C,type:vp.v.UserType.Normal,role:B,status:vp.v.UserStatus.Busy});if(!this.panel.ExistItem(A.callid)){this.panel.Add(new vp.PanelItem(A))}if(vp.v.Me.callid==A.callid){return }this.AddUser(A)};vp.Controller.prototype.OnConferenceLeave=function(E,D,C){var B=E.replace(/^@g/,"guest_");this.panel.RemoveItem(B);var A=this.users_list.GetByID(B);if(this.chat.ExistItem(B)){this.chat.PrintMessage(new vp.Message({author:A,body:vp._("[js/]User has left the conference."),type:vp.v.MessageType.System}))}};vp.Controller.prototype.OnReceiveUserInfo=function(C){var B=this.wx.get().GetUserInfo(C,"DisplayName");if(!B){return false}callid=C.replace(/@g/,"guest_");if(C==this.wx.get().LoginID){if(!vp.v.Me.callid){vp.v.Me=new vp.User()}vp.v.Me.callid=callid;vp.v.Me.name=B}else{if(C==this.wx.get().OtherID){if(!vp.v.Party.callid){vp.v.Party=new vp.User()}vp.v.Party.callid=callid;vp.v.Party.name=B}else{var A=this.users_list.GetByID(callid);if(A){A.name=B}}}this.chat.UpdateRender(this.users_list);this.panel.UpdateRender(this.users_list)};vp.Controller.prototype.OnIncommingMessage=function(J,F,K,A,H,G,I,C){var E=H.replace("@g","guest_");var D=new vp.User();D=this.users_list.GetByID(E);if(D){}else{if(vp.v.Party.callid==E){D=vp.v.Party}else{D=new vp.User({callid:E,name:K});this.AddUser(D)}}E=A&&!/^\s*$/.test(A)?H:vp.v.CommonChatID;var B=new vp.Message({author:new vp.User({callid:E,name:D.name,status:D.status}),to:A,body:F,type:J>0?vp.v.MessageType.System:vp.v.MessageType.User});this.chat.PrintMessage(B);if((vp.v.Conf==vp.v.ConfType.Single||vp.v.Party.callid==E)&&this.chat.Count()<2){this.chat.HideTabsPanel()}else{this.chat.ShowTabsPanel()}if(this.chat.isHide){this.chat.Show();this.chat.SelectItem(B.author.callid)}};vp.Controller.prototype.OnIncomingQuery=function(B,A){if(!A){this.wx.inMC=false;vp.v.Conf=vp.v.ConfType.Single}};vp.Controller.prototype.OnDebugMessage=function(A){vp.Debug.log(arguments)};vp.Controller.prototype.OnChangeState=function(C,B){vp.Debug.log(arguments);if(B==this.wx.prevState){return }this.wx.inMC=vp.v.Conf==vp.v.ConfType.Multi;if(B=="vmConnected"){this.wx.setLanguage(vp.v.Language);this.CheckVersion();this.CheckCrash();jQuery(document).trigger("onLogin");jQuery(document).trigger("onConnected")}else{if(B=="vmNormal"){vp.v.Me.status=vp.v.UserStatus.Online;var D=this.wx.get().OtherID;if(D){vp.v.Party=new vp.User({callid:D,name:D});this.wx.requestUserInfo(D)}if(this.wx.prevState!="vmClose"){jQuery(document).trigger("onReady",[this.wx.get().LoginID]);jQuery(document).trigger("onVzoWxUserDetected",[this.wx.get().LoginID])}jQuery(document).trigger("onUserDetected");jQuery(document).trigger("onTrialCheck",[this.wx.get().GetUserInfo(this.wx.get().LoginID,"trial")=="trial"])}else{if(B=="vmInConference"){if(this.wx.inMC){this.chat.CreateDefaultChat();this.panel.Show()}else{var D=String(this.wx.get().OtherID).replace("'","");if(!D){vp.v.Party=new vp.User({callid:"",name:"",type:vp.v.UserType.Anonymous})}else{vp.v.Party=new vp.User({callid:D,name:D});this.wx.requestUserInfo(D)}D=D.replace("@g","guest_");this.chat.Add(new vp.ChatItem({callid:D,name:D}));this.chat.SelectItem(D);if(this.chat.Count()<2){this.chat.HideTabsPanel()}}jQuery(document).trigger("onJoin")}else{if(B=="vmClose"){jQuery(document).trigger("onHangUp",["Unknown"]);this.panel.RemoveAll();this.panel.Hide();this.chat.DisableChat(vp.v.CommonChatID);var A=this.chat.GetItem(vp.v.CommonChatID);if(A){A.tab.btnClose.Show()}this.wx.inMC=false}}}}this.wx.prevState=B};vp.Controller.prototype.OnUserChangeState=function(C,D){var B=C.replace("@g","guest_");var A=this.users_list.GetByID(B);if(A){}else{if(vp.v.Party.callid==B){A=vp.v.Party}else{return false}}A.status=D;this.chat.UpdateRender(this.users_list)};vp.Controller.prototype.OnChangeOtherState=function(A){vp.v.Conf=A==5?vp.v.ConfType.Multi:vp.v.ConfType.Single;vp.v.Party.status=A;this.chat.UpdateRender(this.users_list);jQuery(document).trigger("onCheckParty",[A])};vp.Controller.prototype.OnRoleNotify=function(D,E,C){var B=D.replace("@g","guest_");var A=this.users_list.GetByID(B);if(!A){return false}A.role=E;this.panel.UpdateRender(this.users_list)};vp.Controller.prototype.OnStartInstance=function(A){jQuery("#vp_loader").hide();if(!A){this.wx.ShowDuplicateError()}};vp.Controller.prototype.RemoveChatItem=function(B){var A=this.users_list.GetByID(B);if(!A){this.chat.RemoveItem(B)}if(!this.users_list.Count()&&!this.chat.Count()){this.chat.Hide()}};vp.Controller.prototype.CheckCrash=function(){vp.fun=this.wx.get;vp.chcr=setInterval(function(){if(!vp.fun().Version){jQuery("#vp_reinstall_on_crash").show();clearInterval(vp.chcr)}},15*1000)};vp.Controller.prototype.AddUser=function(A){this.users_list.Add(A);this.wx.requestUserInfo(A.callid.replace("guest_","@g"))};vp.Debug={};vp.Debug.log=function log(A){if(!vp.v.debug){return }if(jQuery.browser.mozilla&&typeof console!="undefined"){console.log("%o: %o",A.callee,A)}else{if(jQuery("#debug_log").length>0){var D="";var C=new String(A.callee);if(C.match(/[^a-z]*(function.*?)\{/i)){D="<span style='color:#999;'>"+new String(RegExp.$1).replace("function ","")+"</span>"}D+=": [";if(A.length>0){for(var B=0;B<A.length;B++){D+='"'+A[B]+'", '}D=D.replace(/\,\s$/,"")}D+="]";jQuery("#debug_log").prepend(D+"<br><br>")}}};vp.Debug.__=function __(A){if(!vp.v.debug){return }if(jQuery.browser.mozilla&&typeof console!="undefined"){console.log(A)}else{if(jQuery("#debug_log").length>0){jQuery("#debug_log").prepend("<li>"+A+"</li>")}}};vp.Plugin=function(){this.width=vp.v.Width;this.height=vp.v.Height;this.wasReconnected=false;this.prevState="";this.inMC=false;jQuery(document).bind("OnSendMessage",{obj:this},function(A,B){A.data.obj.sendMessage(B)});jQuery(document).bind("OnSoundDisable",{obj:this},function(A){A.data.obj.setSoundNotifications(false)});jQuery(document).bind("OnSoundEnable",{obj:this},function(A){A.data.obj.setSoundNotifications(true)});jQuery(document).bind("StartPrivateCall",{obj:this},function(B,A){B.data.obj.StartPrivateCall(A)});jQuery(document).bind("AcceptCall",{obj:this},function(A){A.data.obj.AcceptCall()})};vp.Plugin.prototype.CreateAXHandler=function(A){vp.Debug.log(arguments);document.write("<script for='WebClientX' event='"+A+"' language='JavaScript'>"+A+";<\/script>")};vp.Plugin.prototype.PreRender=function(){vp.Debug.log(arguments);this.CreateAXHandler("OnDebugMessage(message)");this.CreateAXHandler("OnChangeState(state, message)");this.CreateAXHandler("OnUserChangeState(sUserID, iState)");this.CreateAXHandler("OnChangeOtherState(iState)");this.CreateAXHandler("OnReceiveUserInfo(sUserID)");this.CreateAXHandler("OnRoleNotify(sCallID, iRole, iOldRole)");this.CreateAXHandler("OnIncommingMessage(AIsSystem, AMessageString, AUserName, aTo, AUid, AIsOnlyActivate, ADoNotShowWindow, AIsOpenByUser)");this.CreateAXHandler("OnChatButtonClick(bStart)");this.CreateAXHandler("OnChatUserClick(sCallID, bStart)");this.CreateAXHandler("OnIncomingQuery(sMessag, bStart)");this.CreateAXHandler("OnLoad(CanStart)");this.CreateAXHandler("OnIncomingRecordQuery(sCallID, bDefault)");this.CreateAXHandler("OnConferenceJoin(sCallId, sName, iType)");this.CreateAXHandler("OnConferenceLeave(sCallId, sName, iType)");this.CreateAXHandler("OnAnswerRecordUser(AUserID, AAnswer)");this.CreateAXHandler("OnPersonChatButtonClick(AUserID, bStart)");this.CreateAXHandler("OnStartInstance(FirstInstance)");this.CreateAXHandler("OnCustomVerbClick(sCallID)");document.write("<div id='vp'></div>");jQuery("<div id='wx_left_part'><div id='wx' ></div></div>").appendTo("#vp");jQuery("<div id='vp_activex'></div>").appendTo("#wx");jQuery("<div id='vp_loader'><h3>"+vp._("[js/]Loading VZOchat Web Client...")+"</h3><p><img src='"+vp.v.ServerURL+"/images/spinner.gif' style='margin-right:10px;'>"+vp._("[js/]Usually it takes less than 30 seconds for initial download.")+"</p><p>"+vp._("[js/]And only couple of seconds next time.")+"</p><p>"+vp._("[js/]Please wait for a while. Thank you!")+"</p></div>").appendTo("#wx");jQuery("<div id='vp_wx_duplicate' class='hide'><h2>"+vp._("[js/]VZOchat Application is Already Open")+"</h2><p>"+vp._("[js/]Please make sure that all instances of VZOchat webclient are closed. Thank you!")+"</p></div>").appendTo("#wx");jQuery("<div id='vp_reinstall' class='hide'><div style='position:absolute;top:10px;right:5px;'><a class='small' href='#' onclick=\"jQuery('#vp_reinstall').hide();\"><img src='"+vp.v.ServerURL+"/images/close.gif' alt='close' /></a></div><b>"+vp._("[js/]Version outdated...")+"</b><p>"+vp._("[js/]Please upgrade to a newer version:")+" <a href='"+vp.v.ServerURL+vp.v.Installer+"'>"+vp._("[js/]Update")+"</a></p></div>").appendTo("#wx");jQuery("<div id='vp_reinstall_on_crash' class='hide'><h3 style='margin-bottom:0px;'>"+vp._("[js/]Troubleshooting")+"</h3><h4 style='margin-top:0px;'>"+vp._("[js/]Plugin has crashed or didn't started?")+"</h4><ol><li>"+vp._("[js/]Download and install the latest version:")+"</li><li style='list-style:none;'><a href='"+vp.v.ServerURL+vp.v.Installer+"'>"+vp.v.ServerURL+vp.v.Installer+"</a></li><li vlaue='2'>"+vp._("[js/]Close this browser and try one more time;")+"</li><li>"+vp._("[js/]If nothing helps please report this issue to your vendor.")+"</li></ol></div>").appendTo("#wx_left_part");if(vp.v.debug){if(!jQuery.browser.mozilla||typeof console=="undefined"){jQuery("<div style='width:450px;height:500px;color:#000;font-size:11px;overflow:scroll;' id='debug_log'></div>").appendTo("#vp")}}};vp.Plugin.prototype.Render=function(){this.PreRender();if(!/win/i.test(navigator.platform)){this.forNonWindows()}else{if(jQuery.browser.msie){this.ObjectForIE()}else{this.ObjectForNPAPI()}}};vp.Plugin.prototype.forNonWindows=function(){jQuery("#vp_loader").hide();jQuery("<div id='vp_install_tips'><h3>"+vp._("[js/]Not available")+"</h3><p>"+vp._("[js/]Sorry but VZOchat Web Client only works with Windows browsers only. Try to use Wine or VMWare.")+"</p></div>").appendTo("#vp_activex")};vp.Plugin.prototype.ObjectForFireFox=function(){setTimeout("jQuery(\"<object id='WebClientX' type='"+vp.v.ApplicationType+"' width='"+this.width+"' height='"+this.height+"' LoginName='"+vp.v.LoginName+"' LoginID='"+vp.v.LoginName+"' Password='"+vp.v.Password+"' Session='"+vp.v.Session+"' StartConfType='"+vp.v.Conf+"' ConfName='"+vp.v.ConfName+"' ConfPassword='"+vp.v.ConfPassword+"' Server='"+vp.v.ServerHost+"' Port='"+vp.v.ServerPort+"' Language='"+vp.v.Language+"' OtherID='"+vp.v.OtherID+'\' ></object>").appendTo("#vp_activex")',vp.v.delay);jQuery("<div id='vp_install_tips'><h3>"+vp._("[js/]VZOchat Web Client for Mozilla Firefox")+"</h3><p><a href='"+vp.v.ServerURL+vp.v.FireFoxInstaller+"' onclick='jQuery(\"#vp_install_tips_ff\").show();'><img src='"+vp.v.ServerURL+"/images/addon-icn.png' border='0' alt='"+vp._("[js/]Install VZOchat Web Client")+"'/></a>&nbsp;&nbsp;&nbsp;<a href='"+vp.v.ServerURL+vp.v.FireFoxInstaller+"' style='font-size:large;' onclick='jQuery(\"#vp_install_tips_ff\").show();'>"+vp._("[js/]Install VZOchat Web Client")+"</a></p><p class='gray small'>"+vp._("[js/][b]Important:[/b] If the installation doesn&apos;t start when you click on the link above, you have to do it manually. Save the above XPI file to your local disk by right-clicking on the link and selecting Save Link As.... Then open the saved XPI file from inside Mozilla with File -> Open File... to install it. You can also drop the saved XPI file onto the Extension Manager or the Go button.")+"</p><p class='gray'>"+vp._("[js/]If plugin could not be installed, you can [:a_vzocall]connect to this user[/a] using VZOchat [:a_download]client application[/a].").replace("<:a_vzocall>","<a href='vzochat:"+vp.v.CallID+"'>").replace("<:a_download>","<a href='"+vp.v.DefaultURL+"/Download.aspx' target='_blank'>")+"</p></div><div id='vp_install_tips_ff' style='display:none;'><div id='vp_install_tips_ff_header'><div id='vp_install_tips_ff_left'><img src='"+vp.v.ServerURL+"/images/logo.gif' alt='VZOchat Logo'/>"+vp._("[js/]VZOchat Webclient Installation")+"<br/><span class='ff-note'>"+vp._("[js/]When yellow bar above will appear just follow the steps.")+"</span></div><div id='vp_install_tips_ff_right'><img src='"+vp.v.ServerURL+"/images/arrow.gif' alt='VZOchat Logo'/></div></div><div id='vp_install_tips_ff_details'><div id='vp_install_tips_ff_details_part'><span class='ff-number'><b>1.</b></span> "+vp._("[js/]Click [em]Allow[/em] button.")+"</div><div id='vp_install_tips_ff_details_part'><span class='ff-number'><b>2.</b></span> "+vp._("[js/]Click [em]Install Now[/em].")+"</div><div id='vp_install_tips_ff_details_part'><span class='ff-number'><b>3.</b></span> "+vp._("[js/]Restart Firefox.")+"</div></div><div id='vp_install_tips_ff_body'><a href='#' onclick='jQuery(\"#vp_install_tips_ff\").hide();' style='margin-right:5px;'>"+vp._("[js/]&#91;x&#93; close wizard")+"</a></div></div>").appendTo("#vp_activex object")};vp.Plugin.prototype.ObjectForNPAPI=function(){setTimeout("jQuery(\"<object ID='WebClientX' border='0' type='"+vp.v.ApplicationType+"' width='"+this.width+"' height='"+this.height+"' OtherID='"+vp.v.OtherID+"' LoginName='"+vp.v.LoginName+"' LoginID='"+vp.v.LoginName+"' Password='"+vp.v.Password+"' Session='"+vp.v.Session+"' StartConfType='"+vp.v.Conf+"' ConfName='"+vp.v.ConfName+"' ConfPassword='"+vp.v.ConfPassword+"' Server='"+vp.v.ServerHost+"' Port='"+vp.v.ServerPort+"' Language='"+vp.v.Language+"' ><div id='vp_install_tips'><h3>"+vp._("[js/]Install Steps")+"</h3><ol><li>"+vp._("[js/]Download an installation package with the latest version:")+"</li><li style='list-style:none;'><a href='"+vp.v.ServerURL+vp.v.Installer+"'>"+vp.v.ServerURL+vp.v.Installer+"</a></li><li value='2'>"+vp._("[js/]Close all instances of Firefox, Chrome, Opera and Safari web browsers;")+"</li><li>"+vp._("[js/]Run installer and follow the instructions.")+'</li></ol></div></object>").appendTo("#vp_activex")',vp.v.delay)};vp.Plugin.prototype.ObjectForIE=function(){setTimeout("jQuery(\"<object id='WebClientX' align='middle' type='application/x-oleobject' classid='"+vp.v.ClassID+"' codebase='"+vp.v.ServerURL+vp.v.Installer+"' width='"+this.width+"' height='"+this.height+"'><param name='Width' value='"+this.width+"'/><param name='Height' value='"+this.height+"'/><param name='AxBorderStyle' value='0'/><param name='OtherID' value='"+vp.v.OtherID+"'/><param name='LoginName' value='"+vp.v.LoginName+"'/><param name='LoginID' value='"+vp.v.LoginName+"'/><param name='Password' value='"+vp.v.Password+"'/><param name='Session' value='"+vp.v.Session+"'/><param name='StartConfType' value='"+vp.v.Conf+"'/><param name='ConfName' value='"+vp.v.ConfName+"'/><param name='ConfPassword' value='"+vp.v.ConfPassword+"'/><param name='Server' value='"+vp.v.ServerHost+"'/><param name='Port' value='"+vp.v.ServerPort+"'/><param name='Language' value='"+vp.v.Language+"'/><div id='vp_install_tips'><h3>"+vp._("[js/]VideoPort Web Client for Internet Explorer")+"</h3><p>"+vp._("[js/]To proceed with installation please follow the on-screen instructions on the top of this window.")+"</p><p>"+vp._("[js/]If nothing happens please check that you have enabled ActiveX support in browser security settings.")+'</p></div></object>").appendTo("#vp_activex")',vp.v.delay)};vp.Plugin.prototype.ShowDuplicateError=function(){jQuery("#vp_wx_duplicate").show()};vp.Plugin.prototype.get=function(){return jQuery("#WebClientX")[0]};vp.Plugin.prototype.toggleChatButton=function(){vp.Debug.log(arguments);this.get().ChatButtonClick()};vp.Plugin.prototype.sendMessage=function(B){vp.Debug.log(arguments);var A=B.to==vp.v.CommonChatID?vp.v.MessageType.System:B.type;this.get().SendChatMessage(A,B.to.replace("guest_","@g"),B.body)};vp.Plugin.prototype.getParticipantCount=function(){vp.Debug.log(arguments);return this.get().ParticipantCount};vp.Plugin.prototype.getUserRole=function(A){vp.Debug.log(arguments);return this.get().GetUserRole(A)};vp.Plugin.prototype.requestUserInfo=function(A){vp.Debug.log(arguments);this.get().RequestUserInfo(A.replace(/guest_/,"@g"))};vp.Plugin.prototype.setSoundNotifications=function(A){vp.Debug.log(arguments);this.get().SoundNotifications=A};vp.Plugin.prototype.setLanguage=function(A){vp.Debug.log(arguments);if(A&&A!=""){this.get().Language=A}};vp.Plugin.prototype.StartPrivateCall=function(A){this.get().Call(A," ",0);vp.v.Conf=vp.v.ConfType.Single;this.inMC=false;vp.v.Party=new vp.User({callid:A,name:A});this.get().OtherID=A;this.requestUserInfo(A)};vp.Plugin.prototype.AcceptCall=function(){this.get().AcceptCall()};vp.Plugin.prototype.setMCCustomImage=function setMCCustomImage(B,A){vp.Debug.log(arguments);if(A.length==0){return }this.get().SetCustomVerb(B,A)};vp.Chat=function(){this.items=[];this.btnSound=new vp.SoundButton();this.isHide=true;this.isTabsPanelHide=false};vp.Chat.prototype.Init=function(){jQuery(document).bind("OnTabClose",{obj:this},function(A,B){A.data.obj.HideItem(B)});jQuery(document).bind("OnTabSelect",{obj:this},function(A,B){A.data.obj.SelectItem(B)});jQuery(document).bind("OnSendMessageButtonClick",{obj:this},function(A,B){A.data.obj.SendMessage(B)})};vp.Chat.prototype.Render=function(){this.Init();jQuery("<div id='shelf_empty'></div><div id='shelf' class='hide'><div id='tabs-empty' class='hide'></div><div id='tabs'></div><div id='chats'></div></div>").appendTo("#wx_left_part");this.btnSound.Render()};vp.Chat.prototype.Add=function(A){if(!A){return false}if(!this.ExistItem(A.id)){this.items.push(A);A.Render();if(this.Count()>1){this.ShowTabsPanel()}}return A};vp.Chat.prototype.CreateDefaultChat=function(){if(this.ExistItem(vp.v.CommonChatID)){return false}var B=new vp.User({callid:vp.v.CommonChatID,name:vp._("[js/]#common"),type:vp.v.UserType.CommonChat,role:vp.v.UserRole.General});var A=new vp.ChatItem(B);this.Add(A);this.SelectItem(B.callid);this.ShowTabsPanel()};vp.Chat.prototype.Show=function(){jQuery("#shelf").show();jQuery("#shelf_empty").hide();this.isHide=false};vp.Chat.prototype.Hide=function(){jQuery("#shelf").hide();jQuery("#shelf_empty").show();this.isHide=true};vp.Chat.prototype.SelectItem=function(B){if(this.ExistItem(B)){for(var A in this.items){if(typeof (this.items[A])=="function"){continue}if(this.items[A].id==B){this.items[A].Select(this.isTabsPanelHide)}else{this.items[A].UnSelect()}}}else{return false}return true};vp.Chat.prototype.DisableChat=function(B){var A=this.GetItem(B);if(!A){return false}A.Disable();return true};vp.Chat.prototype.RemoveItem=function(D){var C=this.GetItem(D);if(!C){return false}if(!C.isHide){for(var B in this.items){if(typeof (this.items[B])=="function"){continue}if(this.items[B].id!=D&&!this.items[B].isHide&&!this.items[B].isActive){this.SelectItem(this.items[B].id);break}}}C.Remove();var A=[];while(this.items.length){if(this.items[0].id!=C.id){A.push(this.items.shift())}else{this.items.shift()}}this.items=A;return true};vp.Chat.prototype.RemoveHiddenItems=function(){for(var A in this.items){if(typeof (this.items[A])=="function"){continue}if(this.items[A].isHide){this.RemoveItem(this.items[A].id)}}};vp.Chat.prototype.HideItem=function(C){var B=this.GetItem(C);if(!B){return false}if(!B.isHide){for(var A in this.items){if(typeof (this.items[A])=="function"){continue}if(this.items[A].id!=C&&!this.items[A].isHide&&!this.items[A].isActive){this.SelectItem(this.items[A].id);break}}}B.Hide();return true};vp.Chat.prototype.ExistItem=function(A){return this.GetItem(A)?true:false};vp.Chat.prototype.GetItem=function(B){if(!B){return false}for(var A in this.items){if(typeof (this.items[A])=="function"){continue}if(this.items[A].id==B){return this.items[A]}}return false};vp.Chat.prototype.PrintMessage=function(B){if(!B){return false}var A=this.GetItem(B.author.callid);if(!A){A=this.Add(new vp.ChatItem(B.author))}else{if(A.isHide){A.tab.Show()}}A.PrintMessage(B);if(this.Count()==1){A.Select()}return false};vp.Chat.prototype.SendMessage=function(C){var A=this.GetItem(C);if(!A){return false}var B=A.GetMessage();if(!B.body){return false}A.PrintMessage(B);A.frame.ClearInputText();B.Send();return true};vp.Chat.prototype.UpdateRender=function(B){for(var A in this.items){if(typeof (this.items[A])=="function"){continue}this.items[A].tab.UpdateRender(B);this.items[A].frame.UpdateRender(B)}};vp.Chat.prototype.Count=function(){return this.items.length};vp.Chat.prototype.HideTabsPanel=function(){jQuery("#tabs [id^=tab]").hide();jQuery("#vp #chats .chat .log").css({"border-color":"#ECE9D8"});this.isTabsPanelHide=true};vp.Chat.prototype.ShowTabsPanel=function(){this.isTabsPanelHide=false;jQuery("#tabs").show();jQuery("#tabs_empty").hide();jQuery("#vp #chats .chat .log").css({"border-top-color":"#FFB800"});for(var A in this.items){if(typeof (this.items[A])=="function"){continue}if(!this.items[A].isHide){jQuery("#tab_"+hex_md5(this.items[A].id)).css({display:"block"})}}};vp.ChatItem=function(A){this.id=A.callid;this.name=A.name;this.user=A;this.tab=new vp.Tab(A);this.frame=new vp.Frame(A);this.isActive=false;this.isHide=false};vp.ChatItem.prototype.Render=function(){this.tab.Render();this.frame.Render()};vp.ChatItem.prototype.Select=function(A){this.isHide=false;this.isActive=true;this.tab.Select(A);this.frame.Select()};vp.ChatItem.prototype.Remove=function(){this.tab.Remove();delete this.tab;this.frame.Remove();delete this.frame};vp.ChatItem.prototype.UnSelect=function(){this.isActive=false;this.tab.Disable();this.frame.Hide()};vp.ChatItem.prototype.Hide=function(){this.isHide=true;this.isActive=false;this.tab.Hide();this.frame.Hide()};vp.ChatItem.prototype.Disable=function(){this.frame.Disable()};vp.ChatItem.prototype.PrintMessage=function(A){if(!A){return false}this.frame.PrintMessage(A);if(!this.tab.isActive()){this.tab.Mark()}else{this.tab.Animate()}return true};vp.ChatItem.prototype.GetMessage=function(){var A=new vp.Message({author:vp.v.Me,to:this.id,type:vp.v.MessageType.User,body:this.frame.GetText()});return A};vp.Tab=function(A){this.id=A.callid;this.name=A.name;this.status=A.status;this.activity=false;this.isHide=false;this.btnClose=new vp.CloseButton(this.id)};vp.Tab.prototype.isCommonTab=function(){return(this.id==vp.v.CommonChatID)};vp.Tab.prototype.Render=function(){var A="";if(!this.isCommonTab()){A="<div class='status'><img class='user_status_img' id='user_status_"+hex_md5(this.id)+"' src='"+this.GetImgStatusURL()+"' alt='' /></div>"}jQuery("<div class='tab' id='tab_"+hex_md5(this.id)+"'><nobr>"+A+"<div class='caption' id='caption_"+hex_md5(this.id)+"'>"+this.name+"</div></nobr></div>").appendTo("#tabs");this.btnClose.Render();jQuery("#caption_"+hex_md5(this.id)).bind("click",{id:this.id},function(B){jQuery(document).trigger("OnTabSelect",[B.data.id])});if(this.isCommonTab()){this.btnClose.Hide()}};vp.Tab.prototype.Select=function(A){this.activity=true;this.isHide=false;jQuery("#tab_"+hex_md5(this.id)).removeClass("tab").addClass("atab").removeClass("new");if(!A){this.Show()}};vp.Tab.prototype.Disable=function(){this.activity=false;this.isHide=false;jQuery("#tab_"+hex_md5(this.id)).removeClass("atab").addClass("tab")};vp.Tab.prototype.Remove=function(){jQuery("#tab_"+hex_md5(this.id)).remove()};vp.Tab.prototype.Hide=function(){this.isHide=true;jQuery("#tab_"+hex_md5(this.id)).hide()};vp.Tab.prototype.Show=function(){jQuery("#tab_"+hex_md5(this.id)).show()};vp.Tab.prototype.GetImgStatusURL=function(){return vp.v.ServerURL+"/images/status"+(this.status<0?"no":this.status)+".gif"};vp.Tab.prototype.isActive=function(){return this.activity};vp.Tab.prototype.Mark=function(){jQuery("#tab_"+hex_md5(this.id)).addClass("new")};vp.Tab.prototype.Animate=function(){jQuery("#tab_"+hex_md5(this.id)).animate({marginLeft:"+=2px"},"fast").animate({marginLeft:"-=2px"},"fast")};vp.Tab.prototype.UpdateRender=function(C){var A=false;if(C&&C.Count()){A=C.GetByID(this.id)}else{if(this.id==vp.v.Party.callid){A=vp.v.Party}}if(!A){return false}this.status=A.status;var B=jQuery("#user_status_"+hex_md5(this.id));if(B[0]){B[0].src=this.GetImgStatusURL()}jQuery("#caption_"+hex_md5(this.id)).text(A.name)};vp.Frame=function(A){this.id=A.callid;this.state=0;this.submitUrl=vp.v.ServerUrl+"/images/submit-up.gif";this.height=vp.v.ChatLogHeight;this.btnSend=new vp.SubmitButton(this.id)};vp.Frame.prototype.Render=function(){jQuery("<div class='chat hide' id='chat_"+hex_md5(this.id)+"'><div class='log' id='chat_log_"+hex_md5(this.id)+"' style='height:"+this.height+"px;'></div><div id='input'><div class='me-sign'>"+vp._("[js/]Me")+":</div><div class='textarea' style='width:"+(vp.v.width-65)+"px;'><textarea rows='3' cols='48' id='textarea_"+hex_md5(this.id)+"'></textarea></div></div></div>").appendTo("#chats");jQuery("#chat_"+hex_md5(this.id)+" .textarea").css({width:"415px"});jQuery("#textarea_"+hex_md5(this.id)).keydown(function(A){if(A.which==13){if(A.ctrlKey){A.target.value+="\x0a";A.target.scrollTop=A.target.scrollHeight}else{var B=A.target.id.replace("textarea_","");jQuery("#submit_"+B).click()}A.preventDefault()}return A});jQuery("#textarea_"+hex_md5(this.id)).keyup(function(A){if(A.target.value.replace(/[\n\t\x0a\x0d\s]+/g,"").length==0){A.target.value=""}});this.btnSend.Render()};vp.Frame.prototype.UpdateRender=function(C){if(!C||!C.Count()){return false}for(var A in C.items){if(typeof (C.items[A])=="function"){continue}var B=jQuery("#chat_log_"+hex_md5(this.id));B.html(B.html().replace(C.items[A].callid,C.items[A].name))}};vp.Frame.prototype.Select=function(){jQuery("#chat_"+hex_md5(this.id)).show();var A=jQuery("#chat_log_"+hex_md5(this.id));if(A[0]){A[0].scrollTop=A[0].scrollHeight}jQuery("#textarea_"+hex_md5(this.id)).focus()};vp.Frame.prototype.Hide=function(){jQuery("#chat_"+hex_md5(this.id)).hide()};vp.Frame.prototype.Remove=function(){jQuery("#chat_"+hex_md5(this.id)).remove()};vp.Frame.prototype.Disable=function(){jQuery("#chat_"+hex_md5(this.id)+" textarea").attr("disabled","disabled")};vp.Frame.prototype.Enable=function(){jQuery("#chat_"+hex_md5(this.id)+" textarea").attr("disabled",false)};vp.Frame.prototype.PrintMessage=function(F){if(!F){return false}var E=F.author.callid==vp.v.Me.callid?F.to:F.author.callid;if(F.type==vp.v.MessageType.User){var A=F.author.callid==vp.v.Me.callid?"me":"party";var D=new Date();var B=D.toLocaleTimeString().split(/:/)[0]+":"+D.toLocaleTimeString().split(/:/)[1];var C=F.author.callid==vp.v.Me.callid?vp._("[js/]Me"):F.author.name;jQuery("<p class='"+A+"'><b>"+C+"</b>:&nbsp;"+this.HTMLTrim(F.body)+"</p>").appendTo(jQuery("#chat_log_"+hex_md5(E)))}else{if(F.type==vp.v.MessageType.System){jQuery("<p class='system'>"+F.body+"</p>").appendTo(jQuery("#chat_log_"+hex_md5(E)))}}jQuery("#chat_log_"+hex_md5(E))[0].scrollTop=jQuery("#chat_log_"+hex_md5(E))[0].scrollHeight};vp.Frame.prototype.GetText=function(){return jQuery("#chat_"+hex_md5(this.id)+" textarea").val()};vp.Frame.prototype.ClearInputText=function(){jQuery("#chat_"+hex_md5(this.id)+" textarea").val("")};vp.Frame.prototype.HTMLTrim=function(A){return A?A.replace(/(<[^>]*>)/g,""):""};vp.Panel=function(A){this.items=[]};vp.Panel.prototype.Render=function(){jQuery("<div id='users_container' class='hide'><h3>"+vp._("[js/]Participants")+"</h3><div id='users'></div></div>").appendTo("#vp")};vp.Panel.prototype.Add=function(A){if(!A){return false}this.items.push(A);A.Render();return this.items[this.items.lenght-1]};vp.Panel.prototype.Show=function(){jQuery("#users_container").show()};vp.Panel.prototype.Hide=function(){jQuery("#users_container").hide()};vp.Panel.prototype.RemoveItem=function(B){var C=this.GetItem(B);if(!C){return false}C.Remove();var A=[];while(this.items.length){if(this.items[0].id!=C.id){A.push(this.items.shift())}else{this.items.shift()}}this.items=A;return true};vp.Panel.prototype.RemoveAll=function(){for(var A in this.items){if(typeof (this.items[A])!="function"){this.items[A].Remove()}}this.items=[];return true};vp.Panel.prototype.GetItem=function(B){if(!B){return false}for(var A in this.items){if(typeof (this.items[A])=="function"){continue}if(this.items[A].id==B){return this.items[A]}}return false};vp.Panel.prototype.ExistItem=function(A){return this.GetItem(A)?true:false};vp.Panel.prototype.UpdateRender=function(B){if(!B||!B.Count()){return false}for(var A in this.items){if(typeof (this.items[A])=="function"){continue}this.items[A].UpdateRender(B)}};vp.PanelItem=function(A){this.id=A.callid;this.name=A.name;this.status=A.status;this.role=A.role};vp.PanelItem.prototype.Render=function(){jQuery("<div class='user' id='panel_"+hex_md5(this.id)+"'><div class='name'><img src='"+this.GetRoleImgURL()+"' alt='' />&nbsp;<ins>"+this.name+"</ins></div><div class='controls hide' id='controls_"+hex_md5(this.id)+"'><div class='control' id='control_"+hex_md5(this.id)+"_openchat'><img src='"+this.GetChatImgURL()+"' alt='' /></div><a class='control' target='_blank' href='"+vp.v.DefaultUrl+"/profile/"+this.id+"'><img src='"+vp.v.ServerURL+"/images/info.gif' alt='' /></a></div></div>").appendTo("#users");jQuery("#panel_"+hex_md5(this.id)).mouseover(function(){jQuery(this).find(".controls").show()});jQuery("#panel_"+hex_md5(this.id)).mouseout(function(){jQuery(this).find(".controls").hide()});jQuery("#control_"+hex_md5(this.id)+"_openchat").bind("click",{obj:this},function(A){jQuery(document).trigger("OnChatUserClick",[A.data.obj.id,true])});if(this.id==vp.v.Me.callid){jQuery("#control_"+hex_md5(this.id)+"_openchat").hide()}};vp.PanelItem.prototype.UpdateRender=function(B){if(!B||!B.Count()){return false}var A=B.GetByID(this.id);if(!A){A=vp.v.Me}this.id=A.callid;this.name=A.name;this.status=A.status;this.role=A.role;jQuery("#panel_"+hex_md5(this.id)+" .name ins").text(this.name);var C=jQuery("#panel_"+hex_md5(this.id)+" .name img");if(C[0]){C[0].src=this.GetRoleImgURL()}};vp.PanelItem.prototype.Remove=function(){jQuery("#panel_"+hex_md5(this.id)).remove()};vp.PanelItem.prototype.GetRoleImgURL=function(){var A=vp.v.ServerURL+"/"+(vp.v.UsetRoleIcon[this.role]?vp.v.UsetRoleIcon[this.role]:"images/attendant.gif");return A};vp.PanelItem.prototype.GetChatImgURL=function(){var A=vp.v.ServerURL+"/images/chat.gif";return A};vp.PanelItem.prototype.GetInfoImgURL=function(){var A=vp.v.ServerURL+"/images/info.gif";return A};vp.Message=function(A){this.author=A&&A.author?A.author:new vp.User();this.to=A&&A.to?A.to:"";this.body=A&&A.body?A.body:"";this.type=A&&A.type?A.type:0};vp.Message.prototype.Send=function(){jQuery(document).trigger("OnSendMessage",[this])};vp.User=function User(A){this.callid=A&&A.callid?A.callid.replace(/^@g/,"guest_"):"";this.name=A&&A.name?(/^@g/.test(A.name)?this.parseName(A.name):A.name):this.callid;this.type=A&&A.type?(/^@g/.test(A.callid)?vp.v.UserType.Guest:A.type):vp.v.UserType.Normal;this.role=A&&A.role?A.role:vp.v.UserRole.Invalid;this.status=A&&A.status?A.status:vp.v.UserStatus.Undefined};vp.User.prototype.parseName=function(A,C){if(/^@g.*$/i.test(A)){var B=C==null?vp._("[js/]Guest %id"):C;if(B.length<3){return B.replace("%id","")}var D=parseInt(A.substring(A.length-3),16);return B.replace("%id",D)}else{return A}};vp.UsersList=function(){this.items=[]};vp.UsersList.prototype.Add=function(A){if(A){if(!this.GetByID(A.callid)){this.items.push(A)}}};vp.UsersList.prototype.GetByID=function(B){for(var A in this.items){if(typeof (this.items[A])=="function"){continue}if(this.items[A].callid==B){return this.items[A]}}return false};vp.UsersList.prototype.RemoveItem=function(B){if(!B){return false}var A=[];while(this.items.length){if(this.items[0].callid!=B){A.push(this.items.shift())}else{this.items.shift()}}this.items=A};vp.UsersList.prototype.RemoveAll=function(){delete this.items;this.items=[]};vp.UsersList.prototype.Count=function(){return this.items.length};vp.CloseButton=function(A){this.id=A;this.imgOut=vp.v.ServerURL+"/images/cross-disabled.gif";this.imgOver=vp.v.ServerURL+"/images/cross.gif"};vp.CloseButton.prototype.Render=function(){jQuery("<div id='close_"+hex_md5(this.id)+"' class='cross'><img src='"+this.imgOut+"' alt='' /></div>").appendTo("#tab_"+hex_md5(this.id)+" nobr");jQuery("#close_"+hex_md5(this.id)+" > img").bind("mouseover",{obj:this},function(A){A.target.src=A.data.obj.imgOver});jQuery("#close_"+hex_md5(this.id)+" > img").bind("mouseout",{obj:this},function(A){A.target.src=A.data.obj.imgOut});jQuery("#close_"+hex_md5(this.id)+" > img").bind("click",{id:this.id},function(A){jQuery(document).trigger("OnTabClose",[A.data.id])})};vp.CloseButton.prototype.Show=function(){jQuery("#close_"+hex_md5(this.id)+" > img").css({visibility:"visible"})};vp.CloseButton.prototype.Hide=function(){jQuery("#close_"+hex_md5(this.id)+" > img").css({visibility:"hidden"})};vp.CloseButton.prototype.Remove=function(){jQuery("#close_"+hex_md5(this.id)).remove()};vp.SoundButton=function(){this.status=1;this.imgUrl={enable:vp.v.ServerURL+"/images/sound.gif",disable:vp.v.ServerURL+"/images/sound_none.gif"}};vp.SoundButton.prototype.Render=function(){jQuery("<div id='sound'><img src='"+this.imgUrl.enable+"' alt='"+vp._("[js/]Mute on/off sound notifications")+"' title='"+vp._("[js/]Mute on/off sound notifications")+"' /></div>").appendTo("#tabs");jQuery("#sound").bind("click",{obj:this},function(A){if(A.data.obj.status){A.target.src=A.data.obj.imgUrl.disable;jQuery(document).trigger("OnSoundDisable");A.data.obj.status=0}else{A.target.src=A.data.obj.imgUrl.enable;jQuery(document).trigger("OnSoundEnable");A.data.obj.status=1}})};vp.SubmitButton=function(A){this.id=A;this.imgUrl={up:vp.v.ServerURL+"/images/submit-up.gif",down:vp.v.ServerURL+"/images/submit-down.gif",hover:vp.v.ServerURL+"/images/submit-hover.gif"}};vp.SubmitButton.prototype.Render=function(){jQuery("<div class='submit'><input id='submit_"+hex_md5(this.id)+"' type='image' src='"+this.imgUrl.up+"'/></div>").appendTo("#chat_"+hex_md5(this.id)+" #input");jQuery("#submit_"+hex_md5(this.id)).bind("mousedown",{obj:this},function(A){A.target.src=A.data.obj.imgUrl.down;jQuery(document).bind("mouseup",{obj:A.data.obj},function(B){jQuery("#submit_"+hex_md5(B.data.obj.id))[0].src=B.data.obj.imgUrl.up;jQuery(document).unbind("mouseup");return false});return false});jQuery("#submit_"+hex_md5(this.id)).bind("mouseup",{obj:this},function(A){A.target.src=A.data.obj.imgUrl.up;return false});jQuery("#submit_"+hex_md5(this.id)).bind("click",{obj:this},function(A){jQuery(document).trigger("OnSendMessageButtonClick",[A.data.obj.id]);return false});jQuery("#submit_"+hex_md5(this.id)).bind("hover",{obj:this},function(A){A.target.src=A.data.obj.imgUrl.hover},function(A){A.target.src=A.data.obj.imgUrl.up});jQuery("#submit_"+hex_md5(this.id)).bind("focus",{obj:this},function(A){A.target.src=A.data.obj.imgUrl.hover});jQuery("#submit_"+hex_md5(this.id)).bind("blur",{obj:this},function(A){A.target.src=A.data.obj.imgUrl.up})};var hexcase=1;var b64pad="";var chrsz=8;function hex_md5(A){return binl2hex(core_md5(str2binl(A),A.length*chrsz))}function b64_md5(A){return binl2b64(core_md5(str2binl(A),A.length*chrsz))}function str_md5(A){return binl2str(core_md5(str2binl(A),A.length*chrsz))}function hex_hmac_md5(A,B){return binl2hex(core_hmac_md5(A,B))}function b64_hmac_md5(A,B){return binl2b64(core_hmac_md5(A,B))}function str_hmac_md5(A,B){return binl2str(core_hmac_md5(A,B))}function core_md5(K,F){K[F>>5]|=128<<((F)%32);K[(((F+64)>>>9)<<4)+14]=F;var J=1732584193;var I=-271733879;var H=-1732584194;var G=271733878;for(var C=0;C<K.length;C+=16){var E=J;var D=I;var B=H;var A=G;J=md5_ff(J,I,H,G,K[C+0],7,-680876936);G=md5_ff(G,J,I,H,K[C+1],12,-389564586);H=md5_ff(H,G,J,I,K[C+2],17,606105819);I=md5_ff(I,H,G,J,K[C+3],22,-1044525330);J=md5_ff(J,I,H,G,K[C+4],7,-176418897);G=md5_ff(G,J,I,H,K[C+5],12,1200080426);H=md5_ff(H,G,J,I,K[C+6],17,-1473231341);I=md5_ff(I,H,G,J,K[C+7],22,-45705983);J=md5_ff(J,I,H,G,K[C+8],7,1770035416);G=md5_ff(G,J,I,H,K[C+9],12,-1958414417);H=md5_ff(H,G,J,I,K[C+10],17,-42063);I=md5_ff(I,H,G,J,K[C+11],22,-1990404162);J=md5_ff(J,I,H,G,K[C+12],7,1804603682);G=md5_ff(G,J,I,H,K[C+13],12,-40341101);H=md5_ff(H,G,J,I,K[C+14],17,-1502002290);I=md5_ff(I,H,G,J,K[C+15],22,1236535329);J=md5_gg(J,I,H,G,K[C+1],5,-165796510);G=md5_gg(G,J,I,H,K[C+6],9,-1069501632);H=md5_gg(H,G,J,I,K[C+11],14,643717713);I=md5_gg(I,H,G,J,K[C+0],20,-373897302);J=md5_gg(J,I,H,G,K[C+5],5,-701558691);G=md5_gg(G,J,I,H,K[C+10],9,38016083);H=md5_gg(H,G,J,I,K[C+15],14,-660478335);I=md5_gg(I,H,G,J,K[C+4],20,-405537848);J=md5_gg(J,I,H,G,K[C+9],5,568446438);G=md5_gg(G,J,I,H,K[C+14],9,-1019803690);H=md5_gg(H,G,J,I,K[C+3],14,-187363961);I=md5_gg(I,H,G,J,K[C+8],20,1163531501);J=md5_gg(J,I,H,G,K[C+13],5,-1444681467);G=md5_gg(G,J,I,H,K[C+2],9,-51403784);H=md5_gg(H,G,J,I,K[C+7],14,1735328473);I=md5_gg(I,H,G,J,K[C+12],20,-1926607734);J=md5_hh(J,I,H,G,K[C+5],4,-378558);G=md5_hh(G,J,I,H,K[C+8],11,-2022574463);H=md5_hh(H,G,J,I,K[C+11],16,1839030562);I=md5_hh(I,H,G,J,K[C+14],23,-35309556);J=md5_hh(J,I,H,G,K[C+1],4,-1530992060);G=md5_hh(G,J,I,H,K[C+4],11,1272893353);H=md5_hh(H,G,J,I,K[C+7],16,-155497632);I=md5_hh(I,H,G,J,K[C+10],23,-1094730640);J=md5_hh(J,I,H,G,K[C+13],4,681279174);G=md5_hh(G,J,I,H,K[C+0],11,-358537222);H=md5_hh(H,G,J,I,K[C+3],16,-722521979);I=md5_hh(I,H,G,J,K[C+6],23,76029189);J=md5_hh(J,I,H,G,K[C+9],4,-640364487);G=md5_hh(G,J,I,H,K[C+12],11,-421815835);H=md5_hh(H,G,J,I,K[C+15],16,530742520);I=md5_hh(I,H,G,J,K[C+2],23,-995338651);J=md5_ii(J,I,H,G,K[C+0],6,-198630844);G=md5_ii(G,J,I,H,K[C+7],10,1126891415);H=md5_ii(H,G,J,I,K[C+14],15,-1416354905);I=md5_ii(I,H,G,J,K[C+5],21,-57434055);J=md5_ii(J,I,H,G,K[C+12],6,1700485571);G=md5_ii(G,J,I,H,K[C+3],10,-1894986606);H=md5_ii(H,G,J,I,K[C+10],15,-1051523);I=md5_ii(I,H,G,J,K[C+1],21,-2054922799);J=md5_ii(J,I,H,G,K[C+8],6,1873313359);G=md5_ii(G,J,I,H,K[C+15],10,-30611744);H=md5_ii(H,G,J,I,K[C+6],15,-1560198380);I=md5_ii(I,H,G,J,K[C+13],21,1309151649);J=md5_ii(J,I,H,G,K[C+4],6,-145523070);G=md5_ii(G,J,I,H,K[C+11],10,-1120210379);H=md5_ii(H,G,J,I,K[C+2],15,718787259);I=md5_ii(I,H,G,J,K[C+9],21,-343485551);J=safe_add(J,E);I=safe_add(I,D);H=safe_add(H,B);G=safe_add(G,A)}return Array(J,I,H,G)}function md5_cmn(F,C,B,A,E,D){return safe_add(bit_rol(safe_add(safe_add(C,F),safe_add(A,D)),E),B)}function md5_ff(C,B,G,F,A,E,D){return md5_cmn((B&G)|((~B)&F),C,B,A,E,D)}function md5_gg(C,B,G,F,A,E,D){return md5_cmn((B&F)|(G&(~F)),C,B,A,E,D)}function md5_hh(C,B,G,F,A,E,D){return md5_cmn(B^G^F,C,B,A,E,D)}function md5_ii(C,B,G,F,A,E,D){return md5_cmn(G^(B|(~F)),C,B,A,E,D)}function core_hmac_md5(C,F){var E=str2binl(C);if(E.length>16){E=core_md5(E,C.length*chrsz)}var A=Array(16),D=Array(16);for(var B=0;B<16;B++){A[B]=E[B]^909522486;D[B]=E[B]^1549556828}var G=core_md5(A.concat(str2binl(F)),512+F.length*chrsz);return core_md5(D.concat(G),512+128)}function safe_add(A,D){var C=(A&65535)+(D&65535);var B=(A>>16)+(D>>16)+(C>>16);return(B<<16)|(C&65535)}function bit_rol(A,B){return(A<<B)|(A>>>(32-B))}function str2binl(D){var C=Array();var A=(1<<chrsz)-1;for(var B=0;B<D.length*chrsz;B+=chrsz){C[B>>5]|=(D.charCodeAt(B/chrsz)&A)<<(B%32)}return C}function binl2str(C){var D="";var A=(1<<chrsz)-1;for(var B=0;B<C.length*32;B+=chrsz){D+=String.fromCharCode((C[B>>5]>>>(B%32))&A)}return D}function binl2hex(C){var B=hexcase?"0123456789ABCDEF":"0123456789abcdef";var D="";for(var A=0;A<C.length*4;A++){D+=B.charAt((C[A>>2]>>((A%4)*8+4))&15)+B.charAt((C[A>>2]>>((A%4)*8))&15)}return D}function binl2b64(D){var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var F="";for(var B=0;B<D.length*4;B+=3){var E=(((D[B>>2]>>8*(B%4))&255)<<16)|(((D[B+1>>2]>>8*((B+1)%4))&255)<<8)|((D[B+2>>2]>>8*((B+2)%4))&255);for(var A=0;A<4;A++){if(B*8+A*6>D.length*32){F+=b64pad}else{F+=C.charAt((E>>6*(3-A))&63)}}}return F}vp.v.ApplicationType="application/web-client-np-corp";vp.v.ClassID="CLSID:B4874FCD-C8FF-4810-81E9-8B35D1637982";vp.v.Version="2024157";vp.v.Conf=vp.v.ConfType.Multi;vp.v.Installer="/plugin/TrueConf_Plugin_Installer.exe";vp.v.Installer64="/plugin/TrueConf_Plugin_Installer_x64.exe";var OldBindEvents=vp.Controller.prototype.BindEvents;vp.Controller.prototype.BindEvents=function(A){OldBindEvents.apply(this,arguments);jQuery(document).bind("onLoad",function(B){if(typeof (A.onLoad)!="undefined"){A.onLoad()}});jQuery(document).bind("onLogin",{obj:this},function(B){if(typeof (A.onLogin)!="undefined"){A.onLogin()}if(typeof (A.isCustomButtonEnabled)!="undefined"&&A.isCustomButtonEnabled==true&&typeof (A.CustomButtonIconUrl)!="undefined"&&typeof (A.CustomButtonCaption)!="undefined"&&typeof (A.onCustomButtonClick)!="undefined"){jQuery(document).bind("onCustomButtonClick",function(C,D){A.onCustomButtonClick(D)});B.data.obj.wx.setMCCustomImage(A.CustomButtonCaption,A.CustomButtonIconUrl)}});jQuery(document).bind("onReady",function(B,C){if(typeof (A.onReady)!="undefined"){A.onReady(C)}});jQuery(document).bind("onJoin",function(B){if(typeof (A.onJoin)!="undefined"){A.onJoin()}});jQuery(document).bind("onHangUp",function(B,C){if(typeof (A.onHangUp)!="undefined"){A.onHangUp(C)}});jQuery(document).bind("onChatButtonClick",function(B,C){if(typeof (A.onChatButtonClick)!="undefined"){A.onChatButtonClick(C)}});jQuery(document).bind("OnIncomingQuery",function(B,C){if(typeof (A.onIncomingCall)!="undefined"){A.onIncomingCall(C)}});jQuery(document).bind("onTrialCheck",function(B,C){if(typeof (A.onTrialCheck)!="undefined"){A.onTrialCheck(C)}});jQuery(document).bind("onCheckParty",function(B,C){if(typeof (A.onCheckParty)!="undefined"){A.onCheckParty(C)}})};vp._=function(B){var A=vp.v.l10n&&vp.v.l10n[vp.v.Language]&&vp.v.l10n[vp.v.Language][B]?vp.v.l10n[vp.v.Language][B]:B;return A.replace(/\[js\/?\]/ig,"").replace(/\[([^\]]+)\]/g,"<jQuery1>")};vp.v.l10n['en'] = {
'empty':''};